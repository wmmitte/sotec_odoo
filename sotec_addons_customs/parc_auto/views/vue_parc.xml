<?xml version="1.0" encoding="UTF-8"?>
<odoo>
	<!--Definition de la vue-->


	<!-- vue fleet type de permis tree-->
	<record model="ir.ui.view" id="view_fleet_type_permis_tree">
		<field name="name">view.fleet.type.permis.tree</field>
		<field name="model">fleet.type.permis</field>
		<field name="priority" eval="16"/>
		<field name="arch" type="xml">
			<tree string="Liste des catégories de permis">
				<field name="name"/>
				<field name="description"/>
			</tree>
		</field>
	</record>

	<!-- vue fleet type de permis form-->
	<record model="ir.ui.view" id="view_fleet_type_permis_form">
		<field name="name">view.fleet.type.permis.form</field>
		<field name="model">fleet.type.permis</field>
		<field name="priority" eval="16"/>
		<field name="arch" type="xml">
			<form string="Liste des categories de permis">
				<sheet>
					<group>
						<field name="name" style="width:50%"/>
						<field name="description" style="width:50%"/>
					</group>
				</sheet>

			</form>
		</field>
	</record>

	<!-- Action fleet type de permis-->
	<record model="ir.actions.act_window" id="act_type_permis">
		<field name="name">Liste des catégories de permis</field>
		<field name="res_model">fleet.type.permis</field>
		<field name="view_mode">tree,form</field>
	</record>


	<record model="ir.ui.view" id="res_chauffeur_form">
		<field name="name">res.chauffeur.form</field>
		<field name="model">res.partner</field>
		<field name="inherit_id" ref="base.view_partner_form"/>
		<field name="arch" type="xml">
			<xpath expr="//field[@name='website']" position="attributes">
				<attribute name = "invisible">True</attribute>
			</xpath>
			<xpath expr="//field[@name='title']" position="attributes">
				<attribute name = "invisible">True</attribute>
			</xpath>

			<xpath expr="//field[@name='function']" position="attributes">
				<attribute name = "invisible">True</attribute>
			</xpath>

			<xpath expr="//field[@name='category_id']" position="attributes">
				<attribute name = "invisible">True</attribute>
			</xpath>

			<xpath expr="//field[@name='website']" position="after">
				<field name = "permis"/>
				<field name = "dte_expire"/>
			</xpath>

			<xpath expr="//field[@name='vat']" position="after">
				<field name = "type_permis"/>
			</xpath>

			<xpath expr="//field[@name='vat']" position="attributes">
				<attribute name = "invisible">True</attribute>
			</xpath>

			<xpath expr="//field[@name='parent_id']" position="attributes">
				<attribute name = "invisible">True</attribute>
			</xpath>

			<xpath expr="//field[@name='type']" position="attributes">
				<attribute name = "invisible">True</attribute>
			</xpath>

			<xpath expr="//field[@name='company_type']" position="attributes">
				<attribute name = "invisible">True</attribute>
			</xpath>

			<xpath expr="//page[@name='sales_purchases']" position="attributes">
				<attribute name = "invisible">True</attribute>
			</xpath>

			<xpath expr="//page[@name='contact_addresses']" position="attributes">
				<attribute name = "invisible">True</attribute>
			</xpath>


			<xpath expr="//page[@name='internal_notes']" position="attributes">
				<attribute name = "invisible">True</attribute>
			</xpath>
		</field>
	</record>

	<!-- vehicule Formulaire Herité -->
	<record model="ir.ui.view" id="fleet_vehicule_parc_view_form">
		<field name="name">fleet.vehicule.parc.form</field>
		<field name="model">fleet.vehicle</field>
		<field name="inherit_id" ref="fleet.fleet_vehicle_view_form"/>
		<field name="arch" type="xml">
			<xpath expr="//field[@name='description']/.." position="before">
				<group string="Assurance">
					<field name="assureur_id"/>
					<field name="date_souscription"/>
					<field name="duree_souscription"/>
					<field name="date_expiration"/>
					<field name="montant_souscription"/>
					<field name="couverture_assurance"/>
				</group>
				<group string="Visite Technique">
					<field name="centre_controle_id"/>
					<field name="date_visite_technique"/>
					<field name="date_expiration_visite_technique"/>
					<field name="duree_visite"/>
					<field name="montant_visite"/>
				</group>
				<group string="Taxes ">
					<field name="annee_paiement"/>
					<field name="date_paiement_taxe"/>
					<field name="montant_taxe"/>
				</group>
			</xpath>

		</field>
	</record>

	<!-- vue fleet.vehicle.parc.assurance.history tree-->
	<record model="ir.ui.view" id="view_fleet_vehicle_parc_assurance_history_tree">
		<field name="name">view.fleet.vehicle.parc.assurance.history.tree</field>
		<field name="model">fleet.vehicle.parc.assurance.history</field>
		<field name="priority" eval="16"/>
		<field name="arch" type="xml">
			<tree string="Historique des assurances" create="0" delete="0">
				<field name="vehicule_id"/>
				<field name="assureur_id"/>
				<field name="date_souscription"/>
				<field name="duree_souscription"/>
				<field name="date_expiration" readonly="1"/>
				<field name="montant_souscription"/>
				<field name="couverture_assurance"/>
			</tree>
		</field>
	</record>

	<!-- vue fleet.vehicle.parc.visite.technique.history tree-->
	<record model="ir.ui.view" id="view_fleet_vehicle_parc_visite_technique_history_tree">
		<field name="name">view.fleet.vehicle.parc.visite.technique.history.tree</field>
		<field name="model">fleet.vehicle.parc.visite.technique.history</field>
		<field name="priority" eval="16"/>
		<field name="arch" type="xml">
			<tree string="Historique des visites techniques" create="0" delete="0">
				<field name="vehicule_id"/>
				<field name="centre_controle_id"/>
				<field name="date_visite_technique"/>
				<field name="date_expiration_visite_technique" readonly="1"/>
				<field name="duree_visite"/>
				<field name="montant_visite"/>

			</tree>
		</field>
	</record>

	<!-- Action fleet.vehicle.parc.assurance.history -->
	<record model="ir.actions.act_window" id="act_fleet_vehicle_parc_assurance_history">
		<field name="name">Historique des assurances</field>
		<field name="res_model">fleet.vehicle.parc.assurance.history</field>
		<field name="view_mode">tree</field>
		<field name="context">{'group_by':['vehicule_id']}</field>
	</record>

	<!-- Action fleet.vehicle.parc.visite.technique.history -->
	<record model="ir.actions.act_window" id="act_fleet_vehicle_parc_visite_technique_history">
		<field name="name">Historique des visite.techniques</field>
		<field name="res_model">fleet.vehicle.parc.visite.technique.history</field>
		<field name="view_mode">tree</field>
		<field name="context">{'group_by':['vehicule_id']}</field>
	</record>

	<!-- Action fleet type de conducteurs-->
	<record model="ir.actions.act_window" id="act_liste_conducteur">
		<field name="name">Liste des conducteurs</field>
		<field name="res_model">res.partner</field>
		<field name="view_mode">tree,form</field>
	</record>


	<!-- vue fleet type de fuel form-->
	<record model="ir.ui.view" id="view_fleet_fuel_form">
		<field name="name">view.fleet.fuel.form</field>
		<field name="model">fleet.fuel</field>
		<field name="priority" eval="16"/>
		<field name="arch" type="xml">
			<form string="Liste suivi du carburant">
				<sheet>
					<group>
						<group string="Détails du véhicule">
							<field name="vehicle_id" style="width:50%"/>
							<field name="license_plate" style="width:50%"/>
							<field name="conducteur" style="width:50%"/>
						</group>
						<group string="Détails du ravitaillement en carburant">
							<field name="dte" style="width:50%"/>
							<field name="prix" style="width:50%"/>
							<field name="quantite" style="width:50%"/>
							<field name="total" style="width:50%"/>
						</group>
						<group string="Informations supplémentaires du véhicule">
							<field name="kilometre" style="width:50%"/>
							<field name="reference" style="width:50%"/>
							<field name="observation" style="width:50%"/>
						</group>
					</group>
				</sheet>

			</form>
		</field>
	</record>

	<record model="ir.ui.view" id="view_fleet_fuel_tree">
		<field name="name">view.fleet.fuel.tree</field>
		<field name="model">fleet.fuel</field>
		<field name="priority" eval="16"/>
		<field name="arch" type="xml">
			<tree string="Liste suivi du carburant">
				<field name="dte"/>
				<field name="vehicle_id"/>
				<field name="license_plate"/>
				<field name="conducteur"/>
				<field name="quantite"/>
				<field name="total"/>
			</tree>
		</field>
	</record>


	<record model="ir.actions.act_window" id="act_fleet_fuel">
		<field name="name">Suivi du carburant</field>
		<field name="res_model">fleet.fuel</field>
		<field name="view_mode">tree,form</field>
	</record>


	<record model="ir.ui.view" id="fleet_vehicle_view_form">
		<field name="name">fleet.vehicle.form</field>
		<field name="model">fleet.vehicle</field>
		<field name="inherit_id" ref="fleet.fleet_vehicle_view_form"/>
		<field name="arch" type="xml">
			<xpath expr="//field[@name='car_value']" position="attributes">
				<attribute name = "invisible">True</attribute>
			</xpath>
			<xpath expr="//div[@name='co2']" position="attributes">
				<attribute name = "invisible">True</attribute>
				<label for="co2" attrs="{'invisible':[('co2','=',False)]}"/>
			</xpath>


		</field>
	</record>


	<record model="ir.actions.act_window" id="act_fleet_fuel">
		<field name="name">Suivi du carburant</field>
		<field name="res_model">fleet.fuel</field>
		<field name="view_mode">tree,form</field>
	</record>

	<record model="ir.ui.menu" id="fleet.fleet_vehicle_model_brand_menu">
		<field name="name">Constructeurs</field>
	</record>

	<!-- <record model="ir.ui.menu" id="fleet.fleet_vehicle_service_types_menu">
		<field name="name">Juste pour voir</field>
	</record> -->

	<record id="fleet.fleet_vehicle_model_brand_action" model="ir.actions.act_window">
		<field name="name">Constructeurs</field>
	</record>

	<!-- <record id="fleet.fleet_vehicle_service_types_action" model="ir.actions.act_window">
		<field name="name">Juste pour vérifier type dinter</field>
	</record> -->

	<!-- Menu-->
	<menuitem id="fleet_vehicle_etats_menu" parent="fleet.menu_root" name="Etats" sequence = "99"/>
	<menuitem id="fleet_vehicle_historique_assurance_menu" parent="fleet_vehicle_etats_menu" name="Historique Assurances" sequence = "1" action="act_fleet_vehicle_parc_assurance_history"/>
	<menuitem id="fleet_vehicle_historique_visite_technique_menu" parent="fleet_vehicle_etats_menu" name="Historique Visites Techniques" sequence = "2" action="act_fleet_vehicle_parc_visite_technique_history"/>
	<menuitem id="fleet_vehicle_types_permis_menu" parent="fleet.fleet_configuration" name="Types de permis" sequence = "7" action="act_type_permis"/>
	<menuitem id="fleet.fleet_vehicle_model_brand_menu" active="False"/>
	<menuitem id="parc_auto.fleet_vehicle_model_brand_menu" parent="fleet.fleet_configuration" name="Constructeurs" sequence = "6" action="fleet.fleet_vehicle_model_brand_action"/>
	<menuitem id="fleet_vehicle_drivers" parent="fleet.fleet_configuration" name="Conducteurs" sequence = "8" action="act_liste_conducteur"/>

	<menuitem id="fleet_vehicle_fuel_menu" parent="fleet.fleet_vehicles" name="Suivi du carburant" sequence = "9" action="act_fleet_fuel"/>

</odoo>


